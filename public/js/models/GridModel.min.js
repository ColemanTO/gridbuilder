YUI.add("gridModel",function(e,t){var n=e.Base.create("gridModel",e.Model,[],{initializer:function(){console.log("INITIALIZER FOR MODEL");this.after("columnsChange",this.update,this);this.after("widthChange",this.update,this);this.after("usePixelsChange",this.update,this);this.after("isResponsiveChange",this.update,this);this.after("mediaQueriesChange",this.update,this);e.Handlebars.registerHelper("computePercent",function(t,n){var r=Math.round(t/n*1e7)/1e5;return new e.Handlebars.SafeString(r+"%")});e.Handlebars.registerHelper("computePixel",function(e,t,n){var r="";if(n!=="auto"){r=n*Math.round(e/t*1e6)/1e6;r+="px"}return r||"auto"});e.Handlebars.registerHelper("groupUnits",function(e,t,n){var r=0,i=".yui3-u-1, ";for(;r<n.length;r++){i+="."+e+t+"-"+n[r].span+"-"+n[r].total;n[r+1]!==undefined&&(i+=", ")}return i});e.Handlebars.registerHelper("generateMediaQuery",function(e,t,n){var r="";e&&t?r+="@media (min-width:"+e+"px) and (max-width:"+t+"px)":e&&!t?r+="@media (min-width:"+e+"px)":!e&&t&&(r+="@media (max-width:"+t+"px)");return r})},generateUnits:function(e){var t=[];for(i=1;i<=e;i++)for(j=1;j<i;j++)(j===1||i%j!==0)&&(i%2!==0||j%2!==0)&&t.push({span:j,total:i});return t},update:function(){var t=this;e.io("../public/handlebars/grid.handlebars",{on:{success:function(n,r){e.log("Success with response");t.toCSS(r.responseText)},failure:function(t,n,r){e.log("Failed with status: "+n.statusText)}}})},toCSS:function(t){var n=e.Handlebars.compile(t),r=n({width:this.get("width"),numColumns:this.get("columns"),usePixels:this.get("usePixels"),classPrefix:this.get("classPrefix"),unitClassName:this.get("unitClassName"),className:this.get("className"),offsetClassName:this.get("offsetClassName"),responsiveClassName:this.get("responsiveClassName"),isResponsive:this.get("isResponsive"),units:this.generateUnits(this.get("columns")),mediaQueries:this.get("mediaQueries"),useDefaultMediaQueries:this.get("useDefaultMediaQueries")});this.set("css",r);return r},toColumnsHTML:function(){var e=this.get("tagName"),t=this.get("classPrefix"),n=this.get("unitClassName"),r=this.get("className"),i=this.get("responsiveClassName"),s=this.get("columns"),o="<"+e+' class="'+t+r+"-"+i+'">',u,a;for(a=0;a<s;a++)o+='<div class="'+t+n+"-"+"1"+"-"+s+'"><div class="demo-unit"></div></div>';o+="</div>";return o}},{ATTRS:{className:{value:"g"},responsiveClassName:{value:"responsive"},tagName:{value:"div"},width:{value:960},classPrefix:{value:"yui3-"},unitClassName:{value:"u"},offsetClassName:{value:"offset"},usePixels:{value:!0,validator:e.Lang.isBoolean},units:{value:[],validator:e.Lang.isArray},columns:{value:24,validator:e.Lang.isNumber},isResponsive:{value:!1},css:{value:undefined},gutter:{value:6},useDefaultMediaQueries:{value:!0},mediaQueries:{value:[],validator:e.Lang.isArray}}});e.namespace("GB").GridModel=n},"0.2.0",{requires:["model","handlebars","io-base"]});